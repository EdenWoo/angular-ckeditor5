{"version":3,"sources":["ng://@ckeditor/ckeditor5-angular/ckeditor.component.ts","ng://@ckeditor/ckeditor5-angular/ckeditor.module.ts"],"names":["CKEditorComponent","elementRef","ngZone","this","data","tagName","ready","EventEmitter","change","blur","focus","editorInstance","initialIsDisabled","Object","defineProperty","prototype","isReadOnly","isDisabled","setDisabledState","ngAfterViewInit","_this","runOutsideAngular","createEditor","ngOnDestroy","destroy","writeValue","value","setData","registerOnChange","callback","cvaOnChange","registerOnTouched","cvaOnTouched","element","document","createElement","nativeElement","appendChild","create","config","then","editor","run","emit","setUpEditorEvents","catch","err","console","error","stack","modelDocument","model","viewDocument","editing","view","on","evt","getData","event","Component","args","selector","template","providers","provide","NG_VALUE_ACCESSOR","useExisting","forwardRef","multi","ElementRef","NgZone","Input","Output","CKEditorModule","NgModule","imports","FormsModule","CommonModule","declarations","exports"],"mappings":"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","sourcesContent":["/**\n * @license Copyright (c) 2003-2018, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\nimport {\n\tComponent,\n\tInput,\n\tOutput,\n\tNgZone,\n\tEventEmitter,\n\tforwardRef,\n\tAfterViewInit, OnDestroy,\n\tElementRef\n} from '@angular/core';\n\nimport {\n\tControlValueAccessor,\n\tNG_VALUE_ACCESSOR\n} from '@angular/forms';\n\nimport { CKEditor5 } from './ckeditor';\n\n@Component( {\n\tselector: 'ckeditor',\n\ttemplate: '<ng-template></ng-template>',\n\n\t// Integration with @angular/forms.\n\tproviders: [\n\t\t{\n\t\t\tprovide: NG_VALUE_ACCESSOR,\n\t\t\tuseExisting: forwardRef( () => CKEditorComponent ),\n\t\t\tmulti: true,\n\t\t}\n\t]\n} )\nexport class CKEditorComponent implements AfterViewInit, OnDestroy, ControlValueAccessor {\n\t/**\n\t * The reference to the DOM element created by the component.\n\t */\n\tprivate elementRef!: ElementRef<HTMLElement>;\n\n\t/**\n\t * The constructor of the editor to be used for the instance of the component.\n\t * It can be e.g. the `ClassicEditorBuild`, `InlineEditorBuild` or some custom editor.\n\t */\n\t@Input() editor?: CKEditor5.EditorConstructor;\n\n\t/**\n\t * The configuration of the editor.\n\t * See https://ckeditor.com/docs/ckeditor5/latest/api/module_core_editor_editorconfig-EditorConfig.html\n\t * to learn more.\n\t */\n\t@Input() config?: CKEditor5.Config;\n\n\t/**\n\t * The initial data of the editor. Useful when not using the ngModel.\n\t * See https://angular.io/api/forms/NgModel to learn more.\n\t */\n\t@Input() data = '';\n\n\t/**\n\t * Tag name of the editor component.\n\t *\n\t * The default tag is 'div'.\n\t */\n\t@Input() tagName = 'div';\n\n\t/**\n\t * When set `true`, the editor becomes read-only.\n\t * See https://ckeditor.com/docs/ckeditor5/latest/api/module_core_editor_editor-Editor.html#member-isReadOnly\n\t * to learn more.\n\t */\n\t@Input() set disabled( isDisabled: boolean ) {\n\t\tthis.setDisabledState( isDisabled );\n\t}\n\n\tget disabled() {\n\t\tif ( this.editorInstance ) {\n\t\t\treturn this.editorInstance.isReadOnly;\n\t\t}\n\n\t\treturn this.initialIsDisabled;\n\t}\n\n\t/**\n\t * Fires when the editor is ready. It corresponds with the `editor#ready`\n\t * https://ckeditor.com/docs/ckeditor5/latest/api/module_core_editor_editor-Editor.html#event-ready\n\t * event.\n\t */\n\t@Output() ready = new EventEmitter<CKEditor5.Editor>();\n\n\t/**\n\t * Fires when the content of the editor has changed. It corresponds with the `editor.model.document#change`\n\t * https://ckeditor.com/docs/ckeditor5/latest/api/module_engine_model_document-Document.html#event-change\n\t * event.\n\t */\n\t@Output() change: EventEmitter<ChangeEvent> = new EventEmitter<ChangeEvent>();\n\n\t/**\n\t * Fires when the editing view of the editor is blurred. It corresponds with the `editor.editing.view.document#blur`\n\t * https://ckeditor.com/docs/ckeditor5/latest/api/module_engine_view_document-Document.html#event-event:blur\n\t * event.\n\t */\n\t@Output() blur: EventEmitter<BlurEvent> = new EventEmitter<BlurEvent>();\n\n\t/**\n\t * Fires when the editing view of the editor is focused. It corresponds with the `editor.editing.view.document#focus`\n\t * https://ckeditor.com/docs/ckeditor5/latest/api/module_engine_view_document-Document.html#event-event:focus\n\t * event.\n\t */\n\t@Output() focus: EventEmitter<FocusEvent> = new EventEmitter<FocusEvent>();\n\n\t/**\n\t * The instance of the editor created by this component.\n\t */\n\tpublic editorInstance: CKEditor5.Editor | null = null;\n\n\t/**\n\t * If the component is readâonly before the editor instance is created, it remembers that state,\n\t * so the editor can become readâonly once it is ready.\n\t */\n\tprivate initialIsDisabled = false;\n\n\t/**\n\t * An instance of https://angular.io/api/core/NgZone to allow the interaction with the editor\n\t * withing the Angular event loop.\n\t */\n\tprivate ngZone: NgZone;\n\n\t/**\n\t * A callback executed when the content of the editor changes. Part of the\n\t * `ControlValueAccessor` (https://angular.io/api/forms/ControlValueAccessor) interface.\n\t *\n\t * Note: Unset unless the component uses the `ngModel`.\n\t */\n\tprivate cvaOnChange?: ( data: string ) => void;\n\n\t/**\n\t * A callback executed when the editor has been blurred. Part of the\n\t * `ControlValueAccessor` (https://angular.io/api/forms/ControlValueAccessor) interface.\n\t *\n\t * Note: Unset unless the component uses the `ngModel`.\n\t */\n\tprivate cvaOnTouched?: () => void;\n\n\tconstructor( elementRef: ElementRef, ngZone: NgZone ) {\n\t\tthis.ngZone = ngZone;\n\t\tthis.elementRef = elementRef;\n\t}\n\n\t// Implementing the AfterViewInit interface.\n\tngAfterViewInit() {\n\t\tthis.ngZone.runOutsideAngular( () => {\n\t\t\tthis.createEditor();\n\t\t} );\n\t}\n\n\t// Implementing the OnDestroy interface.\n\tngOnDestroy() {\n\t\tif ( this.editorInstance ) {\n\t\t\tthis.editorInstance.destroy();\n\t\t\tthis.editorInstance = null;\n\t\t}\n\t}\n\n\t// Implementing the ControlValueAccessor interface (only when binding to ngModel).\n\twriteValue( value: string | null ): void {\n\t\t// This method is called with the `null` value when the form resets.\n\t\t// A component's responsibility is to restore to the initial state.\n\t\tif ( value === null ) {\n\t\t\tvalue = '';\n\t\t}\n\n\t\t// If already initialized.\n\t\tif ( this.editorInstance ) {\n\t\t\tthis.editorInstance.setData( value );\n\t\t}\n\t\t// If not, wait for it to be ready; store the data.\n\t\telse {\n\t\t\tthis.data = value;\n\t\t}\n\t}\n\n\t// Implementing the ControlValueAccessor interface (only when binding to ngModel).\n\tregisterOnChange( callback: ( data: string ) => void ): void {\n\t\tthis.cvaOnChange = callback;\n\t}\n\n\t// Implementing the ControlValueAccessor interface (only when binding to ngModel).\n\tregisterOnTouched( callback: () => void ): void {\n\t\tthis.cvaOnTouched = callback;\n\t}\n\n\t// Implementing the ControlValueAccessor interface (only when binding to ngModel).\n\tsetDisabledState( isDisabled: boolean ): void {\n\t\t// If already initialized\n\t\tif ( this.editorInstance ) {\n\t\t\tthis.editorInstance.isReadOnly = isDisabled;\n\t\t}\n\t\t// If not, wait for it to be ready; store the state.\n\t\telse {\n\t\t\tthis.initialIsDisabled = isDisabled;\n\t\t}\n\t}\n\n\t/**\n\t * Creates the editor instance, sets initial editor data,\n\t * then integrates the editor with the Angular component.\n\t */\n\tprivate createEditor(): Promise<any> {\n\t\tconst element = document.createElement( this.tagName );\n\n\t\tthis.elementRef.nativeElement.appendChild( element );\n\n\t\treturn this.editor!.create( element, this.config )\n\t\t\t.then( editor => {\n\t\t\t\tthis.editorInstance = editor;\n\n\t\t\t\teditor.setData( this.data );\n\n\t\t\t\tif ( this.initialIsDisabled ) {\n\t\t\t\t\teditor.isReadOnly = this.initialIsDisabled;\n\t\t\t\t}\n\n\t\t\t\tthis.ngZone.run( () => {\n\t\t\t\t\tthis.ready.emit( editor );\n\t\t\t\t} );\n\n\t\t\t\tthis.setUpEditorEvents( editor );\n\t\t\t} )\n\t\t\t.catch( ( err: Error ) => {\n\t\t\t\tconsole.error( err.stack );\n\t\t\t} );\n\t}\n\n\t/**\n\t * Integrates the editor with the component by attaching related event listeners.\n\t */\n\tprivate setUpEditorEvents( editor: CKEditor5.Editor ): void {\n\t\tconst modelDocument = editor.model.document;\n\t\tconst viewDocument = editor.editing.view.document;\n\n\t\tmodelDocument.on( 'change:data', ( evt: CKEditor5.EventInfo<'change:data'> ) => {\n\t\t\tconst data = editor.getData();\n\n\t\t\tthis.ngZone.run( () => {\n\t\t\t\tif ( this.cvaOnChange ) {\n\t\t\t\t\tthis.cvaOnChange( data );\n\t\t\t\t}\n\n\t\t\t\tthis.change.emit( { event: evt, editor } );\n\t\t\t} );\n\t\t} );\n\n\t\tviewDocument.on( 'focus', ( evt: CKEditor5.EventInfo<'focus'> ) => {\n\t\t\tthis.ngZone.run( () => {\n\t\t\t\tthis.focus.emit( { event: evt, editor } );\n\t\t\t} );\n\t\t} );\n\n\t\tviewDocument.on( 'blur', ( evt: CKEditor5.EventInfo<'blur'> ) => {\n\t\t\tthis.ngZone.run( () => {\n\t\t\t\tif ( this.cvaOnTouched ) {\n\t\t\t\t\tthis.cvaOnTouched();\n\t\t\t\t}\n\n\t\t\t\tthis.blur.emit( { event: evt, editor } );\n\t\t\t} );\n\t\t} );\n\t}\n}\n\nexport interface BlurEvent {\n\tevent: CKEditor5.EventInfo<'blur'>;\n\teditor: CKEditor5.Editor;\n}\n\nexport interface FocusEvent {\n\tevent: CKEditor5.EventInfo<'focus'>;\n\teditor: CKEditor5.Editor;\n}\n\nexport interface ChangeEvent {\n\tevent: CKEditor5.EventInfo<'change:data'>;\n\teditor: CKEditor5.Editor;\n}\n","/**\n * @license Copyright (c) 2003-2018, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { CKEditorComponent } from './ckeditor.component';\n\n@NgModule( {\n\timports: [ FormsModule, CommonModule ],\n\tdeclarations: [ CKEditorComponent ],\n\texports: [ CKEditorComponent ]\n} )\nexport class CKEditorModule {}\n"]}